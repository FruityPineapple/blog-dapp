(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{217:function(e){e.exports=JSON.parse('{"version":"0.0.0","name":"blog_sol","instructions":[{"name":"initBlog","accounts":[{"name":"blogAccount","isMut":true,"isSigner":true},{"name":"genesisPostAccount","isMut":true,"isSigner":true},{"name":"authority","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"signupUser","accounts":[{"name":"userAccount","isMut":true,"isSigner":true},{"name":"authority","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"name","type":"string"},{"name":"avatar","type":"string"}]},{"name":"updateUser","accounts":[{"name":"userAccount","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"name","type":"string"},{"name":"avatar","type":"string"}]},{"name":"createPost","accounts":[{"name":"postAccount","isMut":true,"isSigner":true},{"name":"userAccount","isMut":true,"isSigner":false},{"name":"blogAccount","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"title","type":"string"},{"name":"content","type":"string"}]},{"name":"updatePost","accounts":[{"name":"postAccount","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"title","type":"string"},{"name":"content","type":"string"}]},{"name":"deletePost","accounts":[{"name":"postAccount","isMut":true,"isSigner":false},{"name":"nextPostAccount","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[]},{"name":"deleteLatestPost","accounts":[{"name":"postAccount","isMut":true,"isSigner":false},{"name":"blogAccount","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[]}],"accounts":[{"name":"BlogState","type":{"kind":"struct","fields":[{"name":"currentPostKey","type":"publicKey"},{"name":"authority","type":"publicKey"}]}},{"name":"UserState","type":{"kind":"struct","fields":[{"name":"name","type":"string"},{"name":"avatar","type":"string"},{"name":"authority","type":"publicKey"}]}},{"name":"PostState","type":{"kind":"struct","fields":[{"name":"title","type":"string"},{"name":"content","type":"string"},{"name":"user","type":"publicKey"},{"name":"prePostKey","type":"publicKey"},{"name":"authority","type":"publicKey"}]}}],"events":[{"name":"PostEvent","fields":[{"name":"label","type":"string","index":false},{"name":"postId","type":"publicKey","index":false},{"name":"nextPostId","type":{"option":"publicKey"},"index":false}]}],"metadata":{"address":"BkvkEpivKWUdYa47zivWgsipBsk3pnVScXPTMWsmiAJH"}}')},335:function(e,t){},338:function(e,t){},355:function(e,t){},356:function(e,t){},417:function(e,t){},419:function(e,t){},434:function(e,t){},437:function(e,t){},439:function(e,t){},449:function(e,t){},451:function(e,t){},478:function(e,t){},479:function(e,t){},484:function(e,t){},526:function(e,t){},527:function(e,t){},554:function(e,t,n){},555:function(e,t,n){"use strict";n.r(t);var r=n(148),a=n.n(r),s=n(80),c=n(158),i=n(31),o=n(20),u=n(16),l=n(0),d=n.n(l),p=n(4),b=n(121),f=n(3);function m(e,t){return j.apply(this,arguments)}function j(){return(j=Object(p.a)(d.a.mark((function e(t,n){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.account.postState.fetch(new i.b(t));case 3:if(r=e.sent,(a=r.user.toString())!==i.c.programId.toString()){e.next=7;break}return e.abrupt("return");case 7:return e.abrupt("return",{id:t,title:r.title,content:r.content,userId:a,prePostId:r.prePostKey.toString()});case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var x=n(564);function h(e){var t,n=new x.a((function(n){function r(){return(r=Object(p.a)(d.a.mark((function t(){var r,a,s,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.program,a=e.fromPostId,s=a;case 2:if(!s){t.next=12;break}return t.next=5,m(s,r);case 5:if(c=t.sent){t.next=8;break}return t.abrupt("break",12);case 8:n.next(c),s=c.prePostId,t.next=2;break;case 12:n.complete();case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}t=n,function(){r.apply(this,arguments)}()}));return[n,function(){var e;return null===(e=t)||void 0===e?void 0:e.unsubscribe()}]}function v(e,t){return g.apply(this,arguments)}function g(){return(g=Object(p.a)(d.a.mark((function e(t,n){var r,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=I(n),e.prev=1,e.next=4,t.account.userState.fetch(r.publicKey);case 4:return a=e.sent,s={id:r.publicKey.toString(),name:a.name,avatar:a.avatar},e.abrupt("return",s);case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function O(e,t,n){return w.apply(this,arguments)}function w(){return(w=Object(p.a)(d.a.mark((function e(t,n,r){var a,s,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.account.blogState.fetch(n);case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),s=i.a.generate(),c=i.a.generate(),e.next=13,t.rpc.initBlog({accounts:{authority:r,systemProgram:i.c.programId,blogAccount:s.publicKey,genesisPostAccount:c.publicKey},signers:[s,c]});case 13:return e.next=15,t.account.blogState.fetch(s.publicKey);case 15:return o=e.sent,console.log("Blog pubkey: ",s.publicKey.toString()),e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var y=n(319),k=n.n(y),N=function(e){return"https://gravatar.com/avatar/".concat(k()(e),"?s=400&d=robohash&r=x")},P=n(320),S=n.n(P),C=n(217),M=n(10),K=new i.b(C.metadata.address),A=new i.b("8CcWXSUTTU5P1GBsmoqqaBeSFHmGMHKcSqMZ8ZN8bCSK"),I=function(e){return i.a.fromSeed((new TextEncoder).encode("".concat(K.toString().slice(0,15),"__").concat(e.toString().slice(0,15))))};function L(e){return new b.a(C,K,e)}var T=Object(f.createContext)({user:void 0,posts:[],createPost:function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),updatePost:function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deletePost:function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deleteLatestPost:function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),updateUser:function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fetchUser:function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),B=function(){var e=Object(f.useContext)(T);if(!e)throw new Error("Parent must be wrapped inside PostsProvider");return e},E=function(e){var t=e.children,n=Object(f.useState)(),r=Object(u.a)(n,2),a=r[0],c=r[1],l=Object(f.useState)([]),j=Object(u.a)(l,2),x=j[0],g=j[1],w=Object(f.useState)(),y=Object(u.a)(w,2),k=y[0],P=y[1],C=Object(s.c)(),K=Object(s.d)().connection,B=Object(f.useCallback)(function(){var e=Object(p.a)(d.a.mark((function e(t){var n,r,a,s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=14;break}return n=t.name,r=t.avatar,a=L(k),s=I(k.wallet.publicKey),console.log({name:n,avatar:r}),e.prev=5,e.next=8,a.rpc.signupUser(n,r,{accounts:{authority:k.wallet.publicKey,userAccount:s.publicKey,systemProgram:i.c.programId},signers:[s]});case 8:return c=e.sent,e.abrupt("return",c);case 12:e.prev=12,e.t0=e.catch(5);case 14:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}(),[k]),E=Object(f.useCallback)(Object(p.a)(d.a.mark((function e(){var t,n,r,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=17;break}return t=L(k),e.next=4,v(t,k.wallet.publicKey);case 4:if(n=e.sent){e.next=16;break}return r=S()(" "),a=N(r),e.next=10,B({name:r,avatar:a});case 10:return e.next=12,v(t,k.wallet.publicKey);case 12:s=e.sent,c(s),e.next=17;break;case 16:c(n);case 17:case"end":return e.stop()}}),e)}))),[k,B]),U=Object(f.useCallback)(function(){var e=Object(p.a)(d.a.mark((function e(t){var n,r,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=N(t),!k){e.next=15;break}return r=L(k),a=I(k.wallet.publicKey),e.prev=4,e.next=7,r.rpc.updateUser(t,n,{accounts:{authority:k.wallet.publicKey,userAccount:a.publicKey,systemProgram:i.c.programId}});case 7:return s=e.sent,e.next=10,E();case 10:return e.abrupt("return",s);case 13:e.prev=13,e.t0=e.catch(4);case 15:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),[E,k]),z=Object(f.useCallback)(function(){var e=Object(p.a)(d.a.mark((function e(t){var n,r,s,c,o,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k||!a){e.next=8;break}return n=t.title,r=t.content,s=void 0===r?"":r,c=L(k),o=i.a.generate(),e.next=6,c.rpc.createPost(n,s,{accounts:{blogAccount:A,authority:k.wallet.publicKey,userAccount:new i.b(a.id),postAccount:o.publicKey,systemProgram:i.c.programId},signers:[o]});case 6:return u=e.sent,e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[k,a]),F=Object(f.useCallback)(function(){var e=Object(p.a)(d.a.mark((function e(t,n){var r,a,s,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=11;break}return r=n.title,a=n.content,s=L(k),e.next=5,s.rpc.updatePost(r,a,{accounts:{authority:k.wallet.publicKey,postAccount:new i.b(t.id)}});case 5:return c=e.sent,e.next=8,m(t.id,s);case 8:return(o=e.sent)&&g((function(e){return e.map((function(e){return e.id===t.id?o:e}))})),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[k]),H=Object(f.useCallback)(function(){var e=Object(p.a)(d.a.mark((function e(t,n){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=6;break}return r=L(k),e.next=4,r.rpc.deletePost({accounts:{authority:k.wallet.publicKey,postAccount:new i.b(t),nextPostAccount:new i.b(n)}});case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[k]),W=Object(f.useCallback)(function(){var e=Object(p.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=6;break}return n=L(k),e.next=4,n.rpc.deleteLatestPost({accounts:{authority:k.wallet.publicKey,postAccount:new i.b(t),blogAccount:A}});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[k]);return Object(f.useEffect)((function(){if(C){var e=new b.b(K,C,{});P(e)}}),[K,C]),Object(f.useEffect)((function(){var e;function t(){return t=Object(p.a)(d.a.mark((function t(){var n,r,a,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!k){t.next=7;break}return n=L(k),t.next=4,O(n,A,k.wallet.publicKey);case 4:r=t.sent,a=h({program:n,fromPostId:r.currentPostKey.toString()}),s=Object(u.a)(a,1),s[0].subscribe({next:function(e){g((function(t){return[].concat(Object(o.a)(t),[e])}))},complete:function(){e=n.addEventListener("PostEvent",function(){var e=Object(p.a)(d.a.mark((function e(t){var r,a,s,c,i,u,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===t||void 0===t||null===(r=t.postId)||void 0===r?void 0:r.toString(),c=null===t||void 0===t||null===(a=t.nextPostId)||void 0===a?void 0:a.toString(),!s){e.next=27;break}e.t0=t.label,e.next="CREATE"===e.t0?6:"UPDATE"===e.t0?11:"DELETE"===e.t0?16:26;break;case 6:return e.next=8,m(s,n);case 8:return(i=e.sent)&&g((function(e){return[i].concat(Object(o.a)(e))})),e.abrupt("break",27);case 11:return e.next=13,m(s,n);case 13:return(u=e.sent)&&g((function(e){return e.map((function(e){return e.id===s?u:e}))})),e.abrupt("break",27);case 16:if(!c){e.next=22;break}return e.next=19,m(c,n);case 19:e.t1=e.sent,e.next=23;break;case 22:e.t1=null;case 23:return l=e.t1,g((function(e){return e.filter((function(e){return e.id!==s})).map((function(e){return e.id===c&&l?l:e}))})),e.abrupt("break",27);case 26:return e.abrupt("break",27);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}});case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){k&&e&&L(k).removeEventListener(e).catch((function(e){console.log("error: ",e.message)}))}}),[k]),Object(M.jsx)(T.Provider,{value:{user:a,posts:x,createPost:z,updatePost:F,deletePost:H,fetchUser:E,updateUser:U,deleteLatestPost:W},children:t})},U=n(324),z=n(32),F=n(12),H=n(105),W=["children","loading","disabled","className","leftIcon"],V=function(e){var t=e.children,n=e.loading,r=void 0!==n&&n,a=e.disabled,s=e.className,c=void 0===s?"":s,i=e.leftIcon,o=Object(H.a)(e,W);return a=a||r,Object(M.jsxs)("button",Object(F.a)(Object(F.a)({disabled:a,className:"rounded-lg flex justify-center items-center py-2 px-4 border border-transparent text-sm font-medium text-white bg-gradient-to-r from-indigo-400  to-green-500 focus:outline-none shadow-md \n\t\t\t".concat(c," ").concat(a?"opacity-60 cursor-not-allowed":"transform hover:-translate-y-px focus:shadow-sm focus:-translate-y-0","\n\t\t\t")},o),{},{children:[!a&&!r&&i,a&&!r&&Object(M.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),r&&Object(M.jsx)("svg",{className:"animate-spin h-5 w-5 text-white mr-1",viewBox:"0 0 24 24",children:Object(M.jsx)("path",{fill:"currentColor",d:"M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"})}),t]}))},D=n(567),G=n(566),J=n(562),R=n(563),Z=function(e){var t=e.name,n=Object(f.useRef)(),r=Object(f.useRef)(),a=Object(R.a)(n.current,r.current),s=a.styles,c=a.attributes,i=B().updateUser,o=Object(f.useState)(!1),l=Object(u.a)(o,2),b=l[0],m=l[1],j=Object(f.useState)(t),x=Object(u.a)(j,2),h=x[0],v=x[1],g=function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,i(h);case 3:m(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(M.jsx)(D.a,{className:"relative",children:function(e){var t=e.open;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(D.a.Button,{ref:n,children:Object(M.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"})})}),Object(M.jsx)(G.a,{show:t,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4",enterTo:"opacity-100 translate-y-8",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-4",children:Object(M.jsx)(D.a.Panel,Object(F.a)(Object(F.a)({ref:r,style:Object(F.a)(Object(F.a)({},Object(J.a)(s.popper,["transform","left","top"])),{},{right:0})},c.popper),{},{className:"absolute bottom-8 z-20 transform transition-all",children:Object(M.jsxs)("div",{className:"glass rounded-xl shadow-xl py-4 px-6 flex flex-col",children:[Object(M.jsx)("input",{value:h,onChange:function(e){return v(e.target.value)},type:"text",placeholder:"Your lovely name",className:"bg-white rounded-3xl h-10 px-4"}),Object(M.jsx)(V,{loading:b,onClick:g,className:"w-full mt-3",children:"Save"})]})}))})]})}})},q=function(){return Object(M.jsxs)("div",{className:"card glass relative overflow-hidden flex shadow rounded-lg h-36 bg-white p-4 mt-4",children:[Object(M.jsx)("div",{className:"rounded-lg h-full w-32 bg-white"}),Object(M.jsxs)("div",{className:"flex-1 ml-3",children:[Object(M.jsx)("div",{className:"w-3/4 bg-white rounded-xl h-3 mt-1"}),Object(M.jsx)("div",{className:"w-2/4 bg-white rounded-xl h-3 mt-3"})]})]})},Y=n(565),_=function(e){var t=B().user,n=e.onSubmit,r=e.postTitle,a=e.postContent,s=e.setPostContent,c=e.setPostTitle,i=e.formHeader,o=e.buttonText,l=void 0===o?"Post":o,b=Object(f.useState)(!1),m=Object(u.a)(b,2),j=m[0],x=m[1];return Object(M.jsxs)("div",{className:"glass rounded-lg py-4 px-6 bg-white flex flex-col shadow",children:[i,Object(M.jsx)("input",{value:r,onChange:function(e){return c(e.target.value)},type:"text",placeholder:"Post title",className:"bg-white rounded-3xl h-10 px-4"}),Object(M.jsx)("textarea",{value:a,onChange:function(e){return s(e.target.value)},name:"content",id:"content-area",rows:3,placeholder:"Describe your post...",className:"bg-white rounded-xl px-4 py-2 mt-3"}),Object(M.jsx)(V,{className:"mt-3",disabled:!t,loading:j,onClick:Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,n();case 3:x(!1);case 4:case"end":return e.stop()}}),e)}))),children:l})]})},X=function(e){var t=e.open,n=e.setOpen,r=e.post,a=r.title,s=r.content,c=Object(f.useState)(a),i=Object(u.a)(c,2),o=i[0],l=i[1],b=Object(f.useState)(s),m=Object(u.a)(b,2),j=m[0],x=m[1],h=B().updatePost;return Object(M.jsx)(G.a.Root,{show:t,as:f.Fragment,children:Object(M.jsx)(Y.a,{as:"div",className:"fixed z-10 inset-0 overflow-y-auto",onClose:n,children:Object(M.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(M.jsx)(G.a.Child,{as:f.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(M.jsx)(Y.a.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),Object(M.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(M.jsx)(G.a.Child,{as:f.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:Object(M.jsx)("div",{className:"inline-block align-bottom bg-transparent rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:Object(M.jsx)(_,{postTitle:o,postContent:j,setPostTitle:l,setPostContent:x,onSubmit:Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(r,{title:o,content:j});case 2:n(!1);case 3:case"end":return e.stop()}}),e)}))),buttonText:"Update",formHeader:Object(M.jsx)("div",{className:"flex justify-end mb-3",children:Object(M.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 cursor-pointer text-gray-600  transition duration-100 ease-in-out transform hover:scale-110",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",onClick:function(){return n(!1)},children:Object(M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})})})]})})})},Q=function(e){var t=e.toString();return t.length>20?"".concat(t.substring(0,4),"...").concat(t.substring(t.length-4,t.length)):t},$=function(e){var t=e.id,n=e.title,r=e.content,a=e.user,s=e.date,c=e.nextPostId,o=e.prePostId,l=B(),b=l.user,m=l.deletePost,j=l.deleteLatestPost,x=Object(f.useState)(!1),h=Object(u.a)(x,2),v=h[0],g=h[1],O=Object(f.useState)(!1),w=Object(u.a)(O,2),y=w[0],k=w[1];return Object(M.jsxs)("div",{className:"glass rounded-lg py-4 px-6 bg-white shadow flex flex-col mt-4",children:[Object(M.jsx)("h3",{className:"font-bold text-lg text-gray-600",children:n}),Object(M.jsx)("p",{className:"my-2",children:r}),Object(M.jsxs)("div",{className:"flex justify-between items-end",children:[Object(M.jsxs)("div",{className:"flex items-center mt-2",children:[Object(M.jsx)("img",{src:"https://gravatar.com/avatar/0c3178b383820ae4f3f5b230717c4082?s=400&d=robohash&r=x",alt:"avatar",className:"w-10 h-10 rounded-full bg-gray-200 shadow ring-2 ring-indigo-400 ring-offset-2 ring-opacity-50"}),Object(M.jsxs)("div",{className:"mx-3",children:[Object(M.jsxs)("h3",{className:"font-bold text-gray-600 capitalize",children:["@",Q(new i.b(a))]}),Object(M.jsx)("p",{className:"text-xs",children:s})]})]}),a===(null===b||void 0===b?void 0:b.id)&&Object(M.jsxs)("div",{className:"flex items-center",children:[Object(M.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-green-500 transition duration-100 ease-in-out transform hover:scale-110 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",onClick:function(){return k(!0)},children:Object(M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Object(M.jsx)(X,{post:{title:n,content:r,id:t,userId:a,prePostId:o},open:y,setOpen:function(e){return k(e)}}),Object(M.jsx)("button",{disabled:v,className:v?"cursor-not-allowed":"cursor-pointer",onClick:Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g(!0),!c){e.next=6;break}return e.next=4,m(t,c);case 4:e.next=8;break;case 6:return e.next=8,j(t);case 8:g(!1);case 9:case"end":return e.stop()}}),e)}))),children:v?Object(M.jsx)("svg",{className:"animate-spin h-5 w-5 text-red-500",viewBox:"0 0 24 24",children:Object(M.jsx)("path",{fill:"currentColor",d:"M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"})}):Object(M.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500 transition duration-100 ease-in-out transform hover:scale-110 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})},ee=function(){return Object(M.jsxs)("div",{className:"card glass relative overflow-hidden flex flex-col shadow rounded-lg bg-white p-4 mt-4",children:[Object(M.jsx)("div",{className:"rounded-lg h-32 bg-white"}),Object(M.jsxs)("div",{className:"flex-1 mt-4",children:[Object(M.jsx)("div",{className:"w-3/4 bg-white rounded-xl h-3 mt-1"}),Object(M.jsx)("div",{className:"w-2/4 bg-white rounded-xl h-3 mt-3"})]})]})},te=function(){var e=Object(f.useState)(!1),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(s.e)(),i=a.connected,o=a.select,l=a.publicKey,b=B(),m=b.user,j=b.posts,x=b.fetchUser,h=b.createPost,v=Object(f.useState)(""),g=Object(u.a)(v,2),O=g[0],w=g[1],y=Object(f.useState)(""),k=Object(u.a)(y,2),N=k[0],P=k[1],S=function(){r(!0),o(c.a.Phantom)},C=Object(f.useCallback)(function(){var e=Object(p.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h({title:t,content:n});case 3:w(""),P(""),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),[h]);return Object(f.useEffect)((function(){l&&x()}),[x,l]),Object(f.useEffect)((function(){m&&r(!1)}),[m]),Object(M.jsxs)("div",{className:"dashboard background-color overflow-auto h-screen",children:[Object(M.jsx)("header",{className:"fixed z-10 w-full h-14 glass shadow-md",children:Object(M.jsxs)("div",{className:"flex justify-between items-center h-full container",children:[Object(M.jsxs)("h2",{className:"text-2xl font-bold",children:["\ud83d\udc7b"," ",Object(M.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-br from-indigo-300  to-green-600",children:"BloG"})]}),i?Object(M.jsxs)("div",{className:"flex items-center",children:[Object(M.jsx)("img",{src:null===m||void 0===m?void 0:m.avatar,alt:"avatar",className:"w-8 h-8 rounded-full bg-gray-200 shadow ring-2 ring-indigo-400 ring-offset-2 ring-opacity-50"}),Object(M.jsx)("p",{className:"text-gray-600 font-bold text-sm ml-2 capitalize",children:null===m||void 0===m?void 0:m.name})]}):Object(M.jsx)(V,{loading:n,className:"w-28",onClick:S,leftIcon:Object(M.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),children:"Connect"})]})}),Object(M.jsxs)("main",{className:"dashboard-main pb-4 container flex relative",children:[Object(M.jsx)("aside",{className:"flex-3 pt-6",children:Object(M.jsxs)("div",{className:"dashboard-aside px-8",children:[Object(M.jsx)("h2",{className:"font-bold text-gray-500",children:"You might find these posts interesting"}),Object(M.jsx)(q,{}),Object(M.jsx)(q,{}),Object(M.jsx)("hr",{className:"h-1 w-full bg-gray-100 rounded-xl mt-4"}),Object(M.jsx)("div",{className:"flex justify-between items-end mt-auto",children:Object(M.jsx)("div",{className:"flex w-full justify-between items-end",children:i?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)("div",{className:"flex",children:[Object(M.jsx)("img",{src:null===m||void 0===m?void 0:m.avatar,alt:"avatar",className:"w-12 h-12 rounded-full shadow g-gray-200 ring-2 ring-indigo-400 ring-offset-2 ring-opacity-50"}),Object(M.jsxs)("div",{className:"flex flex-col items-start",children:[Object(M.jsx)("p",{className:"text-gray-700 font-bold text-lg ml-3 capitalize",children:null===m||void 0===m?void 0:m.name}),Object(M.jsxs)("p",{className:"text-gray-700 text-sm ml-3",children:["@",Q(l)]})]})]}),!!m&&Object(M.jsx)(Z,{name:m.name})]}):Object(M.jsx)(V,{loading:n,className:"w-full",onClick:S,children:"Connect to Phantom"})})})]})}),Object(M.jsx)("aside",{className:"flex-5 pt-6",children:Object(M.jsxs)("div",{className:"px-8",children:[Object(M.jsx)(_,{postTitle:O,postContent:N,setPostTitle:w,setPostContent:P,onSubmit:function(){return C(O,N)}}),j.map((function(e,t){var n,r=e.title,a=e.content,s=e.userId,c=e.id,i=e.prePostId;return Object(M.jsx)($,{id:c,title:r,content:a,user:s,prePostId:i,nextPostId:null===(n=j[t-1])||void 0===n?void 0:n.id,date:"Dec 2, 2021"},c)}))]})}),Object(M.jsx)("aside",{className:"flex-3 pt-6",children:Object(M.jsxs)("div",{className:"px-8 dashboard-aside",children:[Object(M.jsx)("h2",{className:"font-bold text-gray-500",children:"Sponsored"}),Object(M.jsx)(ee,{}),Object(M.jsx)(ee,{}),Object(M.jsx)("div",{className:"flex justify-end mt-auto",children:Object(M.jsx)("p",{className:"text-sm",children:"\xa9 2021 BloG, Inc."})})]})})]})]})},ne=function(){return Object(M.jsx)(U.a,{children:Object(M.jsxs)(z.c,{children:[Object(M.jsx)(z.a,{path:"/dashboard",children:Object(M.jsx)(te,{})}),Object(M.jsx)(z.a,{path:"/",children:Object(M.jsx)(te,{})})]})})},re=[Object(c.b)()],ae=Object(i.d)("devnet"),se=function(){return Object(M.jsx)(s.a,{endpoint:ae,children:Object(M.jsx)(s.b,{wallets:re,autoConnect:!0,children:Object(M.jsx)(E,{children:Object(M.jsx)(ne,{})})})})};n(554);a.a.render(Object(M.jsx)(se,{}),document.getElementById("root"))}},[[555,1,2]]]);
//# sourceMappingURL=main.cb4e4ebc.chunk.js.map