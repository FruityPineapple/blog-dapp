(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{231:function(e){e.exports=JSON.parse('{"version":"0.0.0","name":"blog_sol","instructions":[{"name":"initBlog","accounts":[{"name":"blogAccount","isMut":true,"isSigner":true},{"name":"genesisPostAccount","isMut":true,"isSigner":true},{"name":"authority","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"signupUser","accounts":[{"name":"userAccount","isMut":true,"isSigner":true},{"name":"authority","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"name","type":"string"},{"name":"avatar","type":"string"}]},{"name":"updateUser","accounts":[{"name":"userAccount","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"name","type":"string"},{"name":"avatar","type":"string"}]},{"name":"createPost","accounts":[{"name":"postAccount","isMut":true,"isSigner":true},{"name":"userAccount","isMut":true,"isSigner":false},{"name":"blogAccount","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"title","type":"string"},{"name":"content","type":"string"}]},{"name":"updatePost","accounts":[{"name":"postAccount","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"title","type":"string"},{"name":"content","type":"string"}]},{"name":"deletePost","accounts":[{"name":"postAccount","isMut":true,"isSigner":false},{"name":"nextPostAccount","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[]},{"name":"deleteLatestPost","accounts":[{"name":"postAccount","isMut":true,"isSigner":false},{"name":"blogAccount","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[]}],"accounts":[{"name":"BlogState","type":{"kind":"struct","fields":[{"name":"currentPostKey","type":"publicKey"},{"name":"authority","type":"publicKey"}]}},{"name":"UserState","type":{"kind":"struct","fields":[{"name":"name","type":"string"},{"name":"avatar","type":"string"},{"name":"authority","type":"publicKey"}]}},{"name":"PostState","type":{"kind":"struct","fields":[{"name":"title","type":"string"},{"name":"content","type":"string"},{"name":"user","type":"publicKey"},{"name":"prePostKey","type":"publicKey"},{"name":"authority","type":"publicKey"}]}}],"events":[{"name":"PostEvent","fields":[{"name":"label","type":"string","index":false},{"name":"postId","type":"publicKey","index":false},{"name":"nextPostId","type":{"option":"publicKey"},"index":false}]}],"metadata":{"address":"JD5zKV5JvZHXAyF59y5C9kBR7epqGdzFHBvTpPFpwvpy"}}')},349:function(e,t){},353:function(e,t){},367:function(e,t){},368:function(e,t){},432:function(e,t){},434:function(e,t){},449:function(e,t){},453:function(e,t){},455:function(e,t){},466:function(e,t){},468:function(e,t){},495:function(e,t){},497:function(e,t){},498:function(e,t){},503:function(e,t){},505:function(e,t){},511:function(e,t){},513:function(e,t){},532:function(e,t){},544:function(e,t){},547:function(e,t){},558:function(e,t){},559:function(e,t){},580:function(e,t,n){},581:function(e,t,n){"use strict";n.r(t);var r=n(115),a=n.n(r),s=n(93),c=n(173),i=n(33),o=n(13),u=n(11),l=n(0),d=n(2),b=n(137),p=n(1);function j(e,t){return f.apply(this,arguments)}function f(){return(f=Object(d.a)(Object(l.a)().mark((function e(t,n){var r,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.account.postState.fetch(new i.b(t));case 3:if(r=e.sent,(a=r.user.toString())!==i.c.programId.toString()){e.next=7;break}return e.abrupt("return");case 7:return e.abrupt("return",{id:t,title:r.title,content:r.content,userId:a,prePostId:r.prePostKey.toString()});case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var m=n(590);function x(e){var t,n=new m.a((function(n){function r(){return(r=Object(d.a)(Object(l.a)().mark((function t(){var r,a,s,c;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.program,a=e.fromPostId,s=a;case 2:if(!s){t.next=12;break}return t.next=5,j(s,r);case 5:if(c=t.sent){t.next=8;break}return t.abrupt("break",12);case 8:n.next(c),s=c.prePostId,t.next=2;break;case 12:n.complete();case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}t=n,function(){r.apply(this,arguments)}()}));return[n,function(){var e;return null===(e=t)||void 0===e?void 0:e.unsubscribe()}]}function h(e,t){return O.apply(this,arguments)}function O(){return(O=Object(d.a)(Object(l.a)().mark((function e(t,n){var r,a,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=A(n),e.prev=1,e.next=4,t.account.userState.fetch(r.publicKey);case 4:return a=e.sent,s={id:r.publicKey.toString(),name:a.name,avatar:a.avatar},e.abrupt("return",s);case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function v(e,t,n){return g.apply(this,arguments)}function g(){return(g=Object(d.a)(Object(l.a)().mark((function e(t,n,r){var a,s,c,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.account.blogState.fetch(n);case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),s=i.a.generate(),c=i.a.generate(),e.next=13,t.rpc.initBlog({accounts:{authority:r,systemProgram:i.c.programId,blogAccount:s.publicKey,genesisPostAccount:c.publicKey},signers:[s,c]});case 13:return e.next=15,t.account.blogState.fetch(s.publicKey);case 15:return o=e.sent,console.log("Blog pubkey: ",s.publicKey.toString()),e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var y=n(333),w=n.n(y),k=function(e){return"https://gravatar.com/avatar/".concat(w()(e),"?s=400&d=robohash&r=x")},N=n(334),P=n.n(N),S=n(231),C=n(10),K=new i.b(S.metadata.address),M=new i.b("Gx7dKodSkhsbEvrXtVVECdC6a4sPb22iB3pCSmcVqBBp"),A=function(e){return i.a.fromSeed((new TextEncoder).encode("".concat(K.toString().slice(0,15),"__").concat(e.toString().slice(0,15))))};function I(e){return new b.a(S,K,e)}var L=Object(p.createContext)({user:void 0,posts:[],createPost:function(){var e=Object(d.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),updatePost:function(){var e=Object(d.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deletePost:function(){var e=Object(d.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deleteLatestPost:function(){var e=Object(d.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),updateUser:function(){var e=Object(d.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fetchUser:function(){var e=Object(d.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),B=function(){var e=Object(p.useContext)(L);if(!e)throw new Error("Parent must be wrapped inside PostsProvider");return e},E=function(e){var t=e.children,n=Object(p.useState)(),r=Object(u.a)(n,2),a=r[0],c=r[1],f=Object(p.useState)([]),m=Object(u.a)(f,2),O=m[0],g=m[1],y=Object(p.useState)(),w=Object(u.a)(y,2),N=w[0],S=w[1],K=Object(s.c)(),B=Object(s.d)().connection,E=Object(p.useCallback)(function(){var e=Object(d.a)(Object(l.a)().mark((function e(t){var n,r,a,s,c;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N){e.next=13;break}return n=t.name,r=t.avatar,a=I(N),s=A(N.wallet.publicKey),e.prev=4,e.next=7,a.rpc.signupUser(n,r,{accounts:{authority:N.wallet.publicKey,userAccount:s.publicKey,systemProgram:i.c.programId},signers:[s]});case 7:return c=e.sent,e.abrupt("return",c);case 11:e.prev=11,e.t0=e.catch(4);case 13:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),[N]),T=Object(p.useCallback)(Object(d.a)(Object(l.a)().mark((function e(){var t,n,r,a,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N){e.next=17;break}return t=I(N),e.next=4,h(t,N.wallet.publicKey);case 4:if(n=e.sent){e.next=16;break}return r=P()(" "),a=k(r),e.next=10,E({name:r,avatar:a});case 10:return e.next=12,h(t,N.wallet.publicKey);case 12:s=e.sent,c(s),e.next=17;break;case 16:c(n);case 17:case"end":return e.stop()}}),e)}))),[N,E]),z=Object(p.useCallback)(function(){var e=Object(d.a)(Object(l.a)().mark((function e(t){var n,r,a,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=k(t),!N){e.next=15;break}return r=I(N),a=A(N.wallet.publicKey),e.prev=4,e.next=7,r.rpc.updateUser(t,n,{accounts:{authority:N.wallet.publicKey,userAccount:a.publicKey,systemProgram:i.c.programId}});case 7:return s=e.sent,e.next=10,T();case 10:return e.abrupt("return",s);case 13:e.prev=13,e.t0=e.catch(4);case 15:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),[T,N]),F=Object(p.useCallback)(function(){var e=Object(d.a)(Object(l.a)().mark((function e(t){var n,r,s,c,o,u;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N||!a){e.next=8;break}return n=t.title,r=t.content,s=void 0===r?"":r,c=I(N),o=i.a.generate(),e.next=6,c.rpc.createPost(n,s,{accounts:{blogAccount:M,authority:N.wallet.publicKey,userAccount:new i.b(a.id),postAccount:o.publicKey,systemProgram:i.c.programId},signers:[o]});case 6:return u=e.sent,e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[N,a]),U=Object(p.useCallback)(function(){var e=Object(d.a)(Object(l.a)().mark((function e(t,n){var r,a,s,c,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N){e.next=11;break}return r=n.title,a=n.content,s=I(N),e.next=5,s.rpc.updatePost(r,a,{accounts:{authority:N.wallet.publicKey,postAccount:new i.b(t.id)}});case 5:return c=e.sent,e.next=8,j(t.id,s);case 8:return(o=e.sent)&&g((function(e){return e.map((function(e){return e.id===t.id?o:e}))})),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[N]),H=Object(p.useCallback)(function(){var e=Object(d.a)(Object(l.a)().mark((function e(t,n){var r,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N){e.next=6;break}return r=I(N),e.next=4,r.rpc.deletePost({accounts:{authority:N.wallet.publicKey,postAccount:new i.b(t),nextPostAccount:new i.b(n)}});case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[N]),V=Object(p.useCallback)(function(){var e=Object(d.a)(Object(l.a)().mark((function e(t){var n,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N){e.next=6;break}return n=I(N),e.next=4,n.rpc.deleteLatestPost({accounts:{authority:N.wallet.publicKey,postAccount:new i.b(t),blogAccount:M}});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[N]);return Object(p.useEffect)((function(){if(K){var e=new b.b(B,K,{});S(e)}}),[B,K]),Object(p.useEffect)((function(){var e;function t(){return t=Object(d.a)(Object(l.a)().mark((function t(){var n,r,a,s;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!N){t.next=7;break}return n=I(N),t.next=4,v(n,M,N.wallet.publicKey);case 4:r=t.sent,a=x({program:n,fromPostId:r.currentPostKey.toString()}),s=Object(u.a)(a,1),s[0].subscribe({next:function(e){g((function(t){return[].concat(Object(o.a)(t),[e])}))},complete:function(){e=n.addEventListener("PostEvent",function(){var e=Object(d.a)(Object(l.a)().mark((function e(t){var r,a,s,c,i,u,d;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===t||void 0===t||null===(r=t.postId)||void 0===r?void 0:r.toString(),c=null===t||void 0===t||null===(a=t.nextPostId)||void 0===a?void 0:a.toString(),!s){e.next=27;break}e.t0=t.label,e.next="CREATE"===e.t0?6:"UPDATE"===e.t0?11:"DELETE"===e.t0?16:26;break;case 6:return e.next=8,j(s,n);case 8:return(i=e.sent)&&g((function(e){return[i].concat(Object(o.a)(e))})),e.abrupt("break",27);case 11:return e.next=13,j(s,n);case 13:return(u=e.sent)&&g((function(e){return e.map((function(e){return e.id===s?u:e}))})),e.abrupt("break",27);case 16:if(!c){e.next=22;break}return e.next=19,j(c,n);case 19:e.t1=e.sent,e.next=23;break;case 22:e.t1=null;case 23:return d=e.t1,g((function(e){return e.filter((function(e){return e.id!==s})).map((function(e){return e.id===c&&d?d:e}))})),e.abrupt("break",27);case 26:return e.abrupt("break",27);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}});case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){N&&e&&I(N).removeEventListener(e).catch((function(e){console.log("error: ",e.message)}))}}),[N]),Object(C.jsx)(L.Provider,{value:{user:a,posts:O,createPost:F,updatePost:U,deletePost:H,fetchUser:T,updateUser:z,deleteLatestPost:V},children:t})},T=n(338),z=n(34),F=n(8),U=n(28),H=["children","loading","disabled","className","leftIcon"],V=function(e){var t=e.children,n=e.loading,r=void 0!==n&&n,a=e.disabled,s=e.className,c=void 0===s?"":s,i=e.leftIcon,o=Object(U.a)(e,H);return a=a||r,Object(C.jsxs)("button",Object(F.a)(Object(F.a)({disabled:a,className:"rounded-lg flex justify-center items-center py-2 px-4 border border-transparent text-sm font-medium text-white bg-gradient-to-r from-indigo-400  to-green-500 focus:outline-none shadow-md \n\t\t\t".concat(c," ").concat(a?"opacity-60 cursor-not-allowed":"transform hover:-translate-y-px focus:shadow-sm focus:-translate-y-0","\n\t\t\t")},o),{},{children:[!a&&!r&&i,a&&!r&&Object(C.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),r&&Object(C.jsx)("svg",{className:"animate-spin h-5 w-5 text-white mr-1",viewBox:"0 0 24 24",children:Object(C.jsx)("path",{fill:"currentColor",d:"M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"})}),t]}))},W=n(593),D=n(592),J=n(588),R=n(589),G=function(e){var t=e.name,n=Object(p.useRef)(),r=Object(p.useRef)(),a=Object(R.a)(n.current,r.current),s=a.styles,c=a.attributes,i=B().updateUser,o=Object(p.useState)(!1),b=Object(u.a)(o,2),j=b[0],f=b[1],m=Object(p.useState)(t),x=Object(u.a)(m,2),h=x[0],O=x[1],v=function(){var e=Object(d.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,i(h);case 3:f(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsx)(W.a,{className:"relative",children:function(e){var t=e.open;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(W.a.Button,{ref:n,children:Object(C.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"})})}),Object(C.jsx)(D.a,{show:t,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4",enterTo:"opacity-100 translate-y-8",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-4",children:Object(C.jsx)(W.a.Panel,Object(F.a)(Object(F.a)({ref:r,style:Object(F.a)(Object(F.a)({},Object(J.a)(s.popper,["transform","left","top"])),{},{right:0})},c.popper),{},{className:"absolute bottom-8 z-20 transform transition-all",children:Object(C.jsxs)("div",{className:"glass rounded-xl shadow-xl py-4 px-6 flex flex-col",children:[Object(C.jsx)("input",{value:h,onChange:function(e){return O(e.target.value)},type:"text",placeholder:"Your lovely name",className:"bg-white rounded-3xl h-10 px-4"}),Object(C.jsx)(V,{loading:j,onClick:v,className:"w-full mt-3",children:"Save"})]})}))})]})}})},Z=function(){return Object(C.jsxs)("div",{className:"card glass relative overflow-hidden flex shadow rounded-lg h-36 bg-white p-4 mt-4",children:[Object(C.jsx)("div",{className:"rounded-lg h-full w-32 bg-white"}),Object(C.jsxs)("div",{className:"flex-1 ml-3",children:[Object(C.jsx)("div",{className:"w-3/4 bg-white rounded-xl h-3 mt-1"}),Object(C.jsx)("div",{className:"w-2/4 bg-white rounded-xl h-3 mt-3"})]})]})},_=n(591),q=function(e){var t=B().user,n=e.onSubmit,r=e.postTitle,a=e.postContent,s=e.setPostContent,c=e.setPostTitle,i=e.formHeader,o=e.buttonText,b=void 0===o?"Post":o,j=Object(p.useState)(!1),f=Object(u.a)(j,2),m=f[0],x=f[1];return Object(C.jsxs)("div",{className:"glass rounded-lg py-4 px-6 bg-white flex flex-col shadow",children:[i,Object(C.jsx)("input",{value:r,onChange:function(e){return c(e.target.value)},type:"text",placeholder:"Post title",className:"bg-white rounded-3xl h-10 px-4"}),Object(C.jsx)("textarea",{value:a,onChange:function(e){return s(e.target.value)},name:"content",id:"content-area",rows:3,placeholder:"Describe your post...",className:"bg-white rounded-xl px-4 py-2 mt-3"}),Object(C.jsx)(V,{className:"mt-3",disabled:!t,loading:m,onClick:Object(d.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,n();case 3:x(!1);case 4:case"end":return e.stop()}}),e)}))),children:b})]})},X=function(e){var t=e.open,n=e.setOpen,r=e.post,a=r.title,s=r.content,c=Object(p.useState)(a),i=Object(u.a)(c,2),o=i[0],b=i[1],j=Object(p.useState)(s),f=Object(u.a)(j,2),m=f[0],x=f[1],h=B().updatePost;return Object(C.jsx)(D.a.Root,{show:t,as:p.Fragment,children:Object(C.jsx)(_.a,{as:"div",className:"fixed z-10 inset-0 overflow-y-auto",onClose:n,children:Object(C.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(C.jsx)(D.a.Child,{as:p.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(C.jsx)(_.a.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),Object(C.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(C.jsx)(D.a.Child,{as:p.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:Object(C.jsx)("div",{className:"inline-block align-bottom bg-transparent rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:Object(C.jsx)(q,{postTitle:o,postContent:m,setPostTitle:b,setPostContent:x,onSubmit:Object(d.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(r,{title:o,content:m});case 2:n(!1);case 3:case"end":return e.stop()}}),e)}))),buttonText:"Update",formHeader:Object(C.jsx)("div",{className:"flex justify-end mb-3",children:Object(C.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 cursor-pointer text-gray-600  transition duration-100 ease-in-out transform hover:scale-110",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",onClick:function(){return n(!1)},children:Object(C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})})})]})})})},Y=function(e){var t=e.toString();return t.length>20?"".concat(t.substring(0,4),"...").concat(t.substring(t.length-4,t.length)):t},Q=function(e){var t=e.id,n=e.title,r=e.content,a=e.user,s=e.date,c=e.nextPostId,o=e.prePostId,b=B(),j=b.user,f=b.deletePost,m=b.deleteLatestPost,x=Object(p.useState)(!1),h=Object(u.a)(x,2),O=h[0],v=h[1],g=Object(p.useState)(!1),y=Object(u.a)(g,2),w=y[0],k=y[1];return Object(C.jsxs)("div",{className:"glass rounded-lg py-4 px-6 bg-white shadow flex flex-col mt-4",children:[Object(C.jsx)("h3",{className:"font-bold text-lg text-gray-600",children:n}),Object(C.jsx)("p",{className:"my-2",children:r}),Object(C.jsxs)("div",{className:"flex justify-between items-end",children:[Object(C.jsxs)("div",{className:"flex items-center mt-2",children:[Object(C.jsx)("img",{src:"https://gravatar.com/avatar/0c3178b383820ae4f3f5b230717c4082?s=400&d=robohash&r=x",alt:"avatar",className:"w-10 h-10 rounded-full bg-gray-200 shadow ring-2 ring-indigo-400 ring-offset-2 ring-opacity-50"}),Object(C.jsxs)("div",{className:"mx-3",children:[Object(C.jsxs)("h3",{className:"font-bold text-gray-600 capitalize",children:["@",Y(new i.b(a))]}),Object(C.jsx)("p",{className:"text-xs",children:s})]})]}),a===(null===j||void 0===j?void 0:j.id)&&Object(C.jsxs)("div",{className:"flex items-center",children:[Object(C.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-green-500 transition duration-100 ease-in-out transform hover:scale-110 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",onClick:function(){return k(!0)},children:Object(C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Object(C.jsx)(X,{post:{title:n,content:r,id:t,userId:a,prePostId:o},open:w,setOpen:function(e){return k(e)}}),Object(C.jsx)("button",{disabled:O,className:O?"cursor-not-allowed":"cursor-pointer",onClick:Object(d.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v(!0),!c){e.next=6;break}return e.next=4,f(t,c);case 4:e.next=8;break;case 6:return e.next=8,m(t);case 8:v(!1);case 9:case"end":return e.stop()}}),e)}))),children:O?Object(C.jsx)("svg",{className:"animate-spin h-5 w-5 text-red-500",viewBox:"0 0 24 24",children:Object(C.jsx)("path",{fill:"currentColor",d:"M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"})}):Object(C.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500 transition duration-100 ease-in-out transform hover:scale-110 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})},$=function(){return Object(C.jsxs)("div",{className:"card glass relative overflow-hidden flex flex-col shadow rounded-lg bg-white p-4 mt-4",children:[Object(C.jsx)("div",{className:"rounded-lg h-32 bg-white"}),Object(C.jsxs)("div",{className:"flex-1 mt-4",children:[Object(C.jsx)("div",{className:"w-3/4 bg-white rounded-xl h-3 mt-1"}),Object(C.jsx)("div",{className:"w-2/4 bg-white rounded-xl h-3 mt-3"})]})]})},ee=function(){var e=Object(p.useState)(!1),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(s.e)(),i=a.connected,o=a.select,b=a.publicKey,j=B(),f=j.user,m=j.posts,x=j.fetchUser,h=j.createPost,O=Object(p.useState)(""),v=Object(u.a)(O,2),g=v[0],y=v[1],w=Object(p.useState)(""),k=Object(u.a)(w,2),N=k[0],P=k[1],S=function(){r(!0),o(c.a.Phantom)},K=Object(p.useCallback)(function(){var e=Object(d.a)(Object(l.a)().mark((function e(t,n){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h({title:t,content:n});case 3:y(""),P(""),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),[h]);return Object(p.useEffect)((function(){b&&x()}),[x,b]),Object(p.useEffect)((function(){f&&r(!1)}),[f]),Object(C.jsxs)("div",{className:"dashboard background-color overflow-auto h-screen",children:[Object(C.jsx)("header",{className:"fixed z-10 w-full h-14 glass shadow-md",children:Object(C.jsxs)("div",{className:"flex justify-between items-center h-full container",children:[Object(C.jsxs)("h2",{className:"text-2xl font-bold",children:["\ud83d\udc7b"," ",Object(C.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-br from-indigo-300  to-green-600",children:"BloG"})]}),i?Object(C.jsxs)("div",{className:"flex items-center",children:[Object(C.jsx)("img",{src:null===f||void 0===f?void 0:f.avatar,alt:"avatar",className:"w-8 h-8 rounded-full bg-gray-200 shadow ring-2 ring-indigo-400 ring-offset-2 ring-opacity-50"}),Object(C.jsx)("p",{className:"text-gray-600 font-bold text-sm ml-2 capitalize",children:null===f||void 0===f?void 0:f.name})]}):Object(C.jsx)(V,{loading:n,className:"w-28",onClick:S,leftIcon:Object(C.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),children:"Connect"})]})}),Object(C.jsxs)("main",{className:"dashboard-main pb-4 container flex relative",children:[Object(C.jsx)("aside",{className:"flex-3 pt-6",children:Object(C.jsxs)("div",{className:"dashboard-aside px-8",children:[Object(C.jsx)("h2",{className:"font-bold text-gray-500",children:"You might find these posts interesting"}),Object(C.jsx)(Z,{}),Object(C.jsx)(Z,{}),Object(C.jsx)("hr",{className:"h-1 w-full bg-gray-100 rounded-xl mt-4"}),Object(C.jsx)("div",{className:"flex justify-between items-end mt-auto",children:Object(C.jsx)("div",{className:"flex w-full justify-between items-end",children:i?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"flex",children:[Object(C.jsx)("img",{src:null===f||void 0===f?void 0:f.avatar,alt:"avatar",className:"w-12 h-12 rounded-full shadow g-gray-200 ring-2 ring-indigo-400 ring-offset-2 ring-opacity-50"}),Object(C.jsxs)("div",{className:"flex flex-col items-start",children:[Object(C.jsx)("p",{className:"text-gray-700 font-bold text-lg ml-3 capitalize",children:null===f||void 0===f?void 0:f.name}),Object(C.jsxs)("p",{className:"text-gray-700 text-sm ml-3",children:["@",Y(b)]})]})]}),!!f&&Object(C.jsx)(G,{name:f.name})]}):Object(C.jsx)(V,{loading:n,className:"w-full",onClick:S,children:"Connect to Wallet"})})})]})}),Object(C.jsx)("aside",{className:"flex-5 pt-6",children:Object(C.jsxs)("div",{className:"px-8",children:[Object(C.jsx)(q,{postTitle:g,postContent:N,setPostTitle:y,setPostContent:P,onSubmit:function(){return K(g,N)}}),m.map((function(e,t){var n,r=e.title,a=e.content,s=e.userId,c=e.id,i=e.prePostId;return Object(C.jsx)(Q,{id:c,title:r,content:a,user:s,prePostId:i,nextPostId:null===(n=m[t-1])||void 0===n?void 0:n.id,date:"Dec 2, 2021"},c)}))]})}),Object(C.jsx)("aside",{className:"flex-3 pt-6",children:Object(C.jsxs)("div",{className:"px-8 dashboard-aside",children:[Object(C.jsx)("h2",{className:"font-bold text-gray-500",children:"Sponsored"}),Object(C.jsx)($,{}),Object(C.jsx)($,{}),Object(C.jsx)("div",{className:"flex justify-end mt-auto",children:Object(C.jsx)("p",{className:"text-sm",children:"\xa9 2021 BloG, Inc."})})]})})]})]})},te=function(){return Object(C.jsx)(T.a,{children:Object(C.jsxs)(z.c,{children:[Object(C.jsx)(z.a,{path:"/dashboard",children:Object(C.jsx)(ee,{})}),Object(C.jsx)(z.a,{path:"/",children:Object(C.jsx)(ee,{})})]})})},ne=[Object(c.b)()],re=Object(i.d)("devnet"),ae=function(){return Object(C.jsx)(s.a,{endpoint:re,children:Object(C.jsx)(s.b,{wallets:ne,autoConnect:!0,children:Object(C.jsx)(E,{children:Object(C.jsx)(te,{})})})})};n(580);a.a.render(Object(C.jsx)(ae,{}),document.getElementById("root"))}},[[581,1,2]]]);
//# sourceMappingURL=main.8e5b7220.chunk.js.map